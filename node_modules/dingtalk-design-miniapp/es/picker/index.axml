<import-sjs from="./index.sjs" name="_sjs" />
<view class="dtm-picker {{disabled ? 'dtm-picker-disabled' : ''}} {{className ? className : ''}}" onTap="onOpen">
  <slot value="{{cValue}}" name="content">
    <view a:if="{{formatValue}}" class="dtm-picker-text">
      {{formatValue}}
    </view>
    <view a:elif="{{placeholder}}" class="dtm-picker-placeholder">
      {{placeholder}}
    </view>
  </slot>
</view>

<drawer class="dtm-picker-drawer" position="bottom" maskClosable onVisibleChange="onMaskDismiss" visible="{{visible}}">
  <view class="dtm-picker-header">
    <icon class="dtm-picker-header-icon" type="icon_close_outlined" onTap="onDismiss"></icon>
    <view class="dtm-picker-header-title">
      <slot name="title">
        {{title}}
      </slot>
    </view>
    <view class="dtm-picker-header-right" onTap="onOk">{{okText}}</view>
  </view>
  <view class="dtm-picker-content">
    <slot name="content-header" />
    <block a:if="{{columns}}">
      <picker-view value="{{selectedIndex}}" onChange="onChange" maskClass="dtm-picker-content-mask">
        <block a:for="{{columns}}" a:for-item="dataRoot" a:for-index="dataIndex">
          <picker-view-column a:if="{{dataIndex < data.length}}">
            <view a:for="{{dataRoot}}" class="dtm-picker-content-item">
              {{_sjs.getPickerViewLabel(item)}}
            </view>
          </picker-view-column>
        </block>
      </picker-view>
    </block>
    <block a:else>
      <picker-view>
        <picker-view-column>
          <text class="dtm-picker-content-item-no-result">暂无数据</text>
        </picker-view-column>
      </picker-view>
    </block>
  </view>
</drawer>
