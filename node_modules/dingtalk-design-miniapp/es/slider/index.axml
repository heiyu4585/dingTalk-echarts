<import-sjs from="./index.sjs" name="sliderSjs" />

<template name='slider-handler'>
  <view
    class="dtm-slider-handler"
    style="left: {{position}}%;"
  >
    <view
      a:if="{{!icon}}" 
      class="dtm-slider-handler-icon-default"
    >
    </view>
    <view
      a:if="{{icon}}" 
      class="dtm-slider-handler-icon-from-props"
    >
      <dd-icon
        class="dtm-slider-handler-icon-from-props-icon"
        type="{{icon}}"
        size="small"
        color="{{color}}"
      />
    </view>
  </view>
</template>

<view 
  class="{{!disabled ? 'dtm-slider' : 'dtm-slider-disabled'}}"
>
    <view 
      class="dtm-slider-track {{showNumber ? 'dtm-slider-track-number' : ''}}" 
    >
      <view 
        class="dtm-slider-track-touch-area"
        id="{{sliderId}}"
        onTouchStart="handleTrackTouchStart"
        onTouchEnd="handleTrackTouchEnd"
        onTouchMove="handleTrackTouchMove"
      >
        <view 
          class="dtm-slider-track-fill"
        >
          <view class="dtm-slider-track-fill-background" /> 
          <view 
            class="dtm-slider-track-fill-front"
            style="width: {{sliderWidth}}%; left: {{sliderLeft}}%;"
          /> 

          <view class="dtm-slider-ticks">
            <view 
              a:for="{{tickList}}" 
              class= "dtm-slider-tick dtm-slider-tick-{{sliderSjs.isFrontTick(item, sliderLeft, sliderWidth) ? 'front' : 'back' }}"
              style="left: {{item.left}}%;"
          >
            <view a:if={{showNumber}} class="dtm-slider-tick-number">
              <slot name="tick" value="{{item.value}}">
                {{item.value}}
              </slot>
            </view>
          </view>
          </view>
          
          <template a:if="{{range}}" is="slider-handler" data="{{ position: sliderLeft, icon: icon, color: color, value: value[0]}}"/>
          <template is="slider-handler" data="{{ position: sliderLeft + sliderWidth, icon: icon, color: color, value: range?value[1]:value }}"/>
        </view>
        
      </view>
    </view>
    <block a:if="{{endMarks}}">
      <view class="dtm-slider-end-marks">{{max}}</view>
    </block>
<view>