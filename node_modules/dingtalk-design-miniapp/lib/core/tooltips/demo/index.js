"use strict";

Page({
  moving: false,
  data: {
    placement: 'bottomRight',
    title: '引导说明文字',
    visible: true,
    textWidth: 170,
    slotWidth: 64,
    customClass: false,
    //  tooltips 的位置 -> 合适的 content位置，如 tooltips 显示在正上方， 则 content 需要在正下方
    toPosition: {
      topLeft: 'bottomRight',
      top: 'bottom',
      topRight: 'bottomLeft',
      left: 'right',
      right: 'left',
      bottomLeft: 'topRight',
      bottom: 'top',
      bottomRight: 'topLeft'
    },
    operate: [[{
      key: 'topLeft',
      name: '左上'
    }, {
      key: 'top',
      name: '上'
    }, {
      key: 'topRight',
      name: '右上'
    }], [{
      key: 'left',
      name: '左'
    }, {
      key: '',
      name: ''
    }, {
      key: 'right',
      name: '右'
    }], [{
      key: 'bottomLeft',
      name: '左下'
    }, {
      key: 'bottom',
      name: '下'
    }, {
      key: 'bottomRight',
      name: '右下'
    }]]
  },
  changePosition: function changePosition(e) {
    var _this = this;
    var visible = this.data.visible;
    var placement = e.target.dataset.placement;
    if (this.moving) {
      return false;
    }
    this.moving = true;
    if (visible) {
      // 当前是展现状态，需要先隐藏
      this.setData({
        visible: false
      }, function () {
        return setTimeout(function () {
          _this.setData({
            placement: placement
          }, function () {
            return setTimeout(function () {
              _this.setData({
                visible: true
              });
              _this.moving = false;
            }, 400);
          });
        }, 700);
      });
    } else {
      this.setData({
        placement: placement
      }, function () {
        return setTimeout(function () {
          _this.setData({
            visible: true
          });
          _this.moving = false;
        }, 400);
      });
    }
  },
  toggleText: function toggleText() {
    var title = this.data.title;
    title = title === '引导说明文字' ? '蓝色气泡是一种轻量且指向性明确的引导方式。在适当的时候出现，提醒用户有功能更新或者隐藏操作，降低用户的学习成本。' : '引导说明文字';
    this.setData({
      title: title
    });
  },
  setVisiable: function setVisiable() {
    this.setData({
      visible: true
    });
  },
  setHide: function setHide() {
    this.setData({
      visible: false
    });
  },
  toggleWidth: function toggleWidth() {
    var textWidth = this.data.textWidth === 168 ? 480 : 168;
    this.setData({
      textWidth: textWidth
    });
  },
  toggleClass: function toggleClass() {
    this.setData({
      customClass: !this.data.customClass
    });
  },
  onDmClose: function onDmClose() {
    // console.log('onDmClose');
    this.setData({
      visible: false
    });
  },
  toggleSize: function toggleSize() {
    this.setData({
      slotWidth: this.data.slotWidth === 64 ? 32 : 64
    });
  },
  toHome: function toHome() {
    my.navigateTo({
      url: '/src/demo/index/index'
    });
  }
});